<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso Interactivo: Contratación Laboral y Seguridad Social en Colombia</title>
    
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js para gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

    <!-- jsPDF y html2canvas para generar PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #1a5490;
            --secondary-color: #2196F3;
            --accent-color: #FFC107;
            --success-color: #4CAF50;
            --danger-color: #f44336;
            --dark-color: #263238;
            --light-color: #f5f5f5;
            --text-color: #333;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-4: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--gradient-1);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* --- ESTILOS AGREGADOS PARA DIAPOSITIVAS DE INICIO Y FINAL --- */
        .cover-slide {
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            padding: 20px !important;
            height: 100% !important;
            color: white;
            flex-direction: column;
        }

        .cover-slide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            filter: blur(8px) brightness(0.6);
            z-index: 1;
        }

        .intro-slide::before {
             background-image: url('https://images.unsplash.com/photo-1521737604893-d14cc237f11d?auto=format&fit=crop&q=80&w=1770');
        }
        
        .final-slide::before {
            background-image: url('https://images.unsplash.com/photo-1517048676732-d65bc937f952?auto=format&fit=crop&q=80&w=1770');
        }

        .cover-content {
            position: relative;
            z-index: 2;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            padding: 40px 60px;
            border-radius: 20px;
            max-width: 800px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .cover-slide h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .cover-slide h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .cover-slide p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #e0e0e0;
        }
        
        .presented-by {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 20px;
            color: var(--accent-color);
        }
        
        .presenter-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .presenter-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--success-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
        }
        
        .presenter-name {
            font-size: 2rem;
            font-weight: 600;
        }
        
        .contact-info {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            font-size: 1.1rem;
        }

        .contact-info div {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        /* --- FIN DE ESTILOS AGREGADOS --- */
        
        /* --- IMPLEMENTACIÓN DEFINITIVA CON GRID LAYOUT --- */
        body.fullscreen-active {
            overflow: hidden;
        }
        body.fullscreen-active .header,
        body.fullscreen-active .progress-container {
            display: none;
        }
        .fullscreen-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background: white;
            margin: 0 !important;
            padding: 0 !important;
            max-width: 100% !important;
        }
        .fullscreen-mode .slides-container {
            display: grid !important;
            grid-template-rows: 1fr auto !important;
            height: 100vh !important;
            height: 100dvh !important;
            width: 100% !important;
            border-radius: 0 !important;
            max-height: none !important;
        }
        .fullscreen-mode .slide.active {
            overflow-y: auto !important;
            min-height: 0;
            height: auto !important;
            padding: 30px 40px !important;
            animation: none !important;
        }
        .fullscreen-mode .slide.active.cover-slide {
            display: flex !important;
        }
        .fullscreen-mode .slide-controls {
            width: 100% !important;
            box-sizing: border-box !important;
            flex-shrink: 0;
        }
        @media (max-width: 768px) {
            .fullscreen-mode .slide.active { padding: 20px 15px !important; }
            .fullscreen-mode .slide-controls { padding: 15px !important; }
            .fullscreen-mode .btn { padding: 10px 18px !important; font-size: 0.9rem !important; }
        }
        /* --- FIN DE LA IMPLEMENTACIÓN --- */


        /* Loader */
        .loader-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 84, 144, 0.8);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
            flex-direction: column;
        }
        
        .loader-container[style*="display: none;"] {
            display: none !important;
        }


        .loader-text {
            color: white;
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: 500;
        }

        .loader {
            width: 80px;
            height: 80px;
            border: 8px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Header */
        .header {
            background: rgba(26, 84, 144, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            color: white;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .logo i {
            margin-right: 10px;
            color: var(--accent-color);
            font-size: 1.5rem;
        }

        .nav-menu {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .nav-item {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .nav-item:hover, .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .fullscreen-btn {
            background: var(--accent-color);
            color: var(--dark-color);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .fullscreen-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.4);
        }

        /* Progress Bar */
        .progress-container {
            position: fixed;
            top: 70px;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            z-index: 999;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-color), var(--success-color));
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 100px auto 40px;
            padding: 20px;
        }

        /* Slides Container */
        .slides-container {
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
            position: relative;
            min-height: 650px;
            max-height: calc(100vh - 160px);
            display: flex;
            flex-direction: column;
        }

        .slide {
            display: none;
            padding: 40px;
            animation: slideIn 0.5s ease;
            overflow-y: auto;
            height: calc(100% - 70px);
            flex: 1;
        }
        
        .slide.active {
            display: block;
        }
        
        /* Regla corregida para que las diapositivas de portada SÓLO se muestren cuando estén activas */
        .slide.active.cover-slide {
            display: flex;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Slide Content */
        .slide-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--primary-color);
            position: relative;
        }

        .slide-header-image {
            width: 100%;
            max-width: 800px;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            margin: 0 auto 20px;
            display: block;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .slide-title {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 10px;
            animation: fadeInDown 0.8s ease;
            font-weight: 700;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-subtitle {
            font-size: 1.2rem;
            color: #666;
            font-weight: 400;
        }

        /* Cards */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .card {
            background: var(--gradient-1);
            border-radius: 15px;
            padding: 25px;
            color: white;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 200px;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .card:hover::before {
            transform: translateX(0);
        }

        .card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .card-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--accent-color);
        }

        .card-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .card-content {
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Interactive Elements */
        .accordion {
            margin: 20px 0;
        }

        .accordion-item {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .accordion-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .accordion-header:hover {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
        }

        .accordion-content {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
            background: #f9f9f9;
        }

        .accordion-item.active .accordion-content {
            max-height: 1000px; /* Aumentado para contenido largo */
            padding: 20px;
        }

        .accordion-item.active .accordion-header i {
            transform: rotate(180deg);
        }

        /* Tables */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-table thead {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-table tbody tr {
            transition: all 0.3s ease;
        }

        .comparison-table tbody tr:hover {
            background: #f5f5f5;
        }

        /* Charts Container */
        .chart-container {
            position: relative;
            height: 400px;
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        /* Quiz Section */
        .quiz-container {
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .quiz-question {
            font-size: 1.2rem;
            color: var(--dark-color);
            margin-bottom: 20px;
            font-weight: 500;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            background: white;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-weight: 400;
        }

        .quiz-option:hover {
            border-color: var(--primary-color);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .quiz-option.selected {
            background: var(--primary-color);
            color: white;
        }

        .quiz-option.correct {
            background: var(--success-color);
            color: white;
            animation: pulse 0.5s ease;
        }

        .quiz-option.incorrect {
            background: var(--danger-color);
            color: white;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Navigation Controls */
        .slide-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: #f5f5f5;
            border-top: 2px solid #e0e0e0;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }
        
        .btn-lg {
            padding: 15px 40px;
            font-size: 1.2rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #66BB6A);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--accent-color), #FFB300);
            color: var(--dark-color);
        }
        
        .btn-accent {
            background: var(--accent-color);
            color: var(--dark-color);
        }


        /* Info Boxes */
        .info-box {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 5px solid var(--primary-color);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .info-box-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--primary-color);
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            padding: 20px;
            width: calc(50% - 30px);
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .timeline-item:nth-child(odd) {
            margin-left: auto;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--accent-color);
            border-radius: 50%;
            top: 30px;
            box-shadow: 0 0 0 5px rgba(255, 193, 7, 0.2);
        }

        .timeline-item:nth-child(odd)::before {
            left: -40px;
        }

        .timeline-item:nth-child(even)::before {
            right: -40px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .tab {
            padding: 15px 25px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            color: #666;
            transition: all 0.3s ease;
            position: relative;
            font-weight: 500;
        }

        .tab:hover {
            color: var(--primary-color);
            background: rgba(26, 84, 144, 0.05);
        }

        .tab.active {
            color: var(--primary-color);
            font-weight: 600;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary-color);
            animation: slideIn 0.3s ease;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Floating Action Buttons */
        .fab-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 1050; 
            transform: translateZ(0); 
        }

        .fab {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--accent-color), #ff9800);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            position: relative;
        }


        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        }

        .fab i {
            color: white;
            font-size: 24px;
        }

        .fab-label {
            position: absolute;
            right: 70px;
            background: var(--dark-color);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            font-size: 0.9rem;
        }

        .fab:hover .fab-label {
            opacity: 1;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            position: relative;
            background: white;
            margin: 5% auto;
            padding: 40px;
            width: 90%;
            max-width: 800px;
            border-radius: 20px;
            animation: slideDown 0.5s ease;
            max-height: 80vh;
            overflow-y: auto;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 28px;
            cursor: pointer;
            color: #999;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: var(--danger-color);
        }

        /* Video Header */
        .video-header-container {
            width: 100%;
            max-width: 800px;
            height: 200px;
            margin: 0 auto 20px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
        }
        .slide-header-video {
            width: 100%;
            height: 100%;
            object-fit: contain; /* CAMBIO: de 'cover' a 'contain' para que se vea completo */
        }

        /* New Certificate Styles */
        .new-certificate {
            font-family: 'Times New Roman', serif;
            width: 100%;
            max-width: 850px;
            margin: 20px auto;
            background: #ffffff;
            border-radius: 10px;
            padding: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            border: 1px solid #e0e0e0;
        }

        .cert-bg-swirl {
            position: absolute;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(29,84,144,0.3) 0%, rgba(29,84,144,0) 60%);
            opacity: 0.5;
            z-index: 0;
        }
        .cert-bg-swirl.top-right {
            top: -100px;
            right: -100px;
            background: radial-gradient(circle, rgba(29,84,144,0.3) 0%, rgba(255,215,0,0.3) 50%, rgba(255,255,255,0) 70%);
        }
        .cert-bg-swirl.bottom-left {
            bottom: -100px;
            left: -100px;
            background: radial-gradient(circle, rgba(255,215,0,0.3) 0%, rgba(29,84,144,0.3) 50%, rgba(255,255,255,0) 70%);
        }

        .cert-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .cert-seal {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 80px;
            color: #1a5490;
            opacity: 0.8;
        }
        .cert-seal .fa-medal {
            text-shadow: 2px 2px 5px rgba(0,0,0,0.2);
        }

        .cert-title-section {
            margin-top: 20px;
        }

        .cert-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.8rem;
            color: #1a5490;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .cert-subtitle {
            font-size: 1.1rem;
            color: #555;
        }

        .cert-recipient-name {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            color: #cda434;
            margin: 40px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #1a5490;
            min-height: 80px; /* Placeholder height */
        }

        .cert-course-text {
            font-size: 1rem;
            color: #555;
            margin-top: 30px;
        }

        .cert-course-name {
            font-size: 1.5rem;
            font-style: italic;
            color: #333;
            margin-top: 10px;
        }

        .cert-signatures {
            display: flex;
            justify-content: space-around;
            margin-top: 60px;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
        }

        .cert-signature-block {
            width: 40%;
        }

        .cert-signature-line {
            border-bottom: 1px solid #555;
            margin-bottom: 8px;
        }

        .cert-signature-block p {
            font-size: 0.9rem;
            font-weight: bold;
            color: #1a5490;
        }

        /* Print Styles */
        @media print {
            body, html {
                height: auto;
            }
            .no-print {
                display: none !important;
            }
            .print-area {
                visibility: visible !important;
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            body > *:not(.print-area) {
                visibility: hidden;
            }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                padding: 10px;
                height: auto;
            }
            .logo {
                margin-bottom: 10px;
            }
            .nav-menu {
                flex-wrap: wrap;
                gap: 5px;
                justify-content: center;
            }

            .nav-item {
                font-size: 0.8rem;
                padding: 5px 10px;
            }

            .slide {
                padding: 20px;
            }

            .slide-title {
                font-size: 1.8rem;
            }
             .cover-slide h1 {
                font-size: 2.2rem;
            }

            .timeline::before {
                left: 20px;
            }

            .timeline-item {
                width: calc(100% - 40px);
                margin-left: 40px !important;
            }
            
            .timeline-item:nth-child(even) {
                margin-left: 40px !important;
            }

            .timeline-item::before {
                left: -30px !important;
            }
            
            .timeline-item:nth-child(even)::before {
                left: -30px !important;
                right: auto;
            }


            .cards-grid {
                grid-template-columns: 1fr;
            }

            .fab-container {
                bottom: 20px;
                right: 20px;
            }

            .fab {
                width: 50px;
                height: 50px;
            }

            .fab i {
                font-size: 20px;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                width: 100%;
            }
            .cert-title {
                font-size: 1.8rem;
            }
            .cert-recipient-name {
                font-size: 2.5rem;
            }
        }

        /* Links Grid for Resources */
        .links-section {
            margin: 30px 0;
        }

        .links-category {
            margin-bottom: 30px;
        }

        .links-category-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }

        .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .link-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
            color: var(--text-color);
        }

        .link-card:hover {
            border-color: var(--primary-color);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .link-logo {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .link-info {
            flex: 1;
        }

        .link-name {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .link-description {
            font-size: 0.85rem;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- Loader -->
    <div class="loader-container" id="loader" style="display: none;">
        <div>
            <div class="loader"></div>
            <div id="loader-text" class="loader-text">Generando PDF...</div>
        </div>
    </div>

    <!-- Header -->
    <header class="header no-print">
        <div class="logo">
            <i class="fas fa-graduation-cap"></i>
            <span>Curso de Contratación</span>
        </div>
        <nav class="nav-menu">
             <a class="nav-item active" onclick="goToSlide(0)"><i class="fas fa-play-circle"></i> Inicio</a>
            <a class="nav-item" onclick="goToSlide(1)"><i class="fas fa-home"></i> Bienvenida</a>
            <a class="nav-item" onclick="goToSlide(3)"><i class="fas fa-file-contract"></i> Contratos</a>
            <a class="nav-item" onclick="goToSlide(5)"><i class="fas fa-shield-alt"></i> Seguridad</a>
            <a class="nav-item" onclick="goToSlide(9)"><i class="fas fa-book"></i> Recursos</a>
            <a class="nav-item" onclick="goToSlide(10)"><i class="fas fa-tools"></i> Herramientas</a>
            <a class="nav-item" onclick="goToSlide(11)"><i class="fas fa-question-circle"></i> Quiz</a>
            <a class="nav-item" onclick="goToSlide(12)"><i class="fas fa-award"></i> Certificado</a>
            <a class="nav-item" onclick="goToSlide(13)"><i class="fas fa-envelope"></i> Contacto</a>
            <button class="fullscreen-btn" onclick="toggleFullscreen()">
                <i class="fas fa-expand"></i> Pantalla Completa
            </button>
        </nav>
    </header>

    <!-- Progress Bar -->
    <div class="progress-container no-print">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Main Container -->
    <div class="container" id="mainContainer">
        <div class="slides-container">
            
            <!-- ====== DIAPOSITIVA DE INICIO AGREGADA ====== -->
            <div class="slide active cover-slide intro-slide">
                <div class="cover-content">
                    <p class="presented-by">Presentado por</p>
                    <div class="presenter-info">
                        <div class="presenter-avatar">A</div>
                        <h2 class="presenter-name">Arnold López Ayala</h2>
                    </div>
                    <p>Curso Interactivo: Contratación y Afiliación al Sistema de Seguridad Social</p>
                    <button class="btn btn-accent btn-lg" onclick="nextSlide()">
                        Comenzar Curso <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Slide 1: Bienvenida (Original - se le quitó la clase 'active') -->
            <div class="slide">
                <div class="slide-header">
                    <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=800&h=200&fit=crop" alt="Contratación Laboral" class="slide-header-image">
                    <h1 class="slide-title">
                        <i class="fas fa-rocket"></i> Bienvenido al Curso Integral
                    </h1>
                    <p class="slide-subtitle">Contratación Laboral y Seguridad Social en Colombia</p>
                </div>

                <div class="cards-grid">
                    <div class="card" style="background: var(--gradient-1);" onclick="goToSlide(2)">
                        <i class="fas fa-book-open card-icon"></i>
                        <h3 class="card-title">Fundamentos Legales</h3>
                        <p class="card-content">Comprende el marco jurídico del Código Sustantivo del Trabajo y los elementos esenciales del contrato laboral.</p>
                    </div>
                    <div class="card" style="background: var(--gradient-2);" onclick="goToSlide(3)">
                        <i class="fas fa-file-signature card-icon"></i>
                        <h3 class="card-title">Tipos de Contratos</h3>
                        <p class="card-content">Explora las diferentes modalidades contractuales y sus características específicas.</p>
                    </div>
                    <div class="card" style="background: var(--gradient-3);" onclick="goToSlide(5)">
                        <i class="fas fa-hospital card-icon"></i>
                        <h3 class="card-title">Sistema de Seguridad Social</h3>
                        <p class="card-content">Aprende sobre EPS, ARL, Pensiones y Cajas de Compensación.</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-box-title">
                        <i class="fas fa-info-circle"></i>
                        ¿Qué aprenderás en este curso?
                    </div>
                    <ul>
                        <li>Marco normativo de la contratación laboral en Colombia</li>
                        <li>Tipología completa de contratos laborales según el CST</li>
                        <li>Proceso detallado de afiliación al Sistema de Seguridad Social</li>
                        <li>Manejo práctico de la PILA</li>
                        <li>Análisis estratégico para empleadores</li>
                    </ul>
                </div>
            </div>

            <!-- El resto de tus diapositivas originales (2-12) -->
            <!-- Slide 2: Fundamentos del Contrato -->
            <div class="slide">
                <div class="slide-header">
                    <img src="https://images.unsplash.com/photo-1450101499163-c8848c66ca85?w=800&h=200&fit=crop" alt="Fundamentos Legales" class="slide-header-image">
                    <h1 class="slide-title"><i class="fas fa-balance-scale"></i> Fundamentos del Contrato de Trabajo</h1>
                    <p class="slide-subtitle">La Relación de Subordinación</p>
                </div>
                <div class="accordion">
                    <div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)"><span><i class="fas fa-user"></i> Actividad Personal del Trabajador</span><i class="fas fa-chevron-down"></i></div><div class="accordion-content"><p>El servicio debe ser ejecutado directamente por la persona contratada. Este carácter <strong>intuitu personae</strong> significa que el trabajador no puede delegar sus funciones en un tercero.</p><div class="info-box" style="margin-top: 15px;"><div class="info-box-title"><i class="fas fa-exclamation-triangle"></i> Importante</div><p>La prestación personal es indelegable. Si el trabajador envía a otra persona a realizar su trabajo, se rompe el vínculo laboral.</p></div></div></div>
                    <div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)"><span><i class="fas fa-link"></i> Subordinación o Dependencia</span><i class="fas fa-chevron-down"></i></div><div class="accordion-content"><p>Es el elemento <strong>más importante</strong> y distintivo de la relación laboral. Se define como:</p><ul style="margin: 15px 0; padding-left: 20px;"><li>Facultad del empleador para exigir cumplimiento de órdenes</li><li>Poder de dirección sobre modo, tiempo y cantidad de trabajo</li><li>Imposición de reglamentos internos</li><li>Obligación del trabajador de acatar dichas órdenes</li></ul><div class="chart-container" style="height: 300px;"><canvas id="subordinationChart"></canvas></div></div></div>
                    <div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)"><span><i class="fas fa-dollar-sign"></i> Salario como Retribución</span><i class="fas fa-chevron-down"></i></div><div class="accordion-content"><p>Constituye la contraprestación económica que recibe el trabajador. Puede presentarse en diferentes formas:</p><div class="cards-grid" style="margin-top: 20px;"><div class="card" style="background: linear-gradient(135deg, #4CAF50, #8BC34A);"><i class="fas fa-money-bill-wave card-icon"></i><h4 class="card-title">Salario Fijo</h4><p class="card-content">Monto determinado pagado periódicamente</p></div><div class="card" style="background: linear-gradient(135deg, #FF9800, #FF5722);"><i class="fas fa-percentage card-icon"></i><h4 class="card-title">Comisiones</h4><p class="card-content">Porcentaje sobre ventas o resultados</p></div><div class="card" style="background: linear-gradient(135deg, #9C27B0, #E91E63);"><i class="fas fa-gift card-icon"></i><h4 class="card-title">Especie</h4><p class="card-content">Alimentación, vivienda, transporte</p></div></div></div></div>
                </div>
            </div>
            <!-- Slide 3: Tipos de Contratos -->
            <div class="slide"><div class="slide-header"><img src="https://images.unsplash.com/photo-1521791136064-7986c2920216?w=800&h=200&fit=crop" alt="Tipos de Contratos" class="slide-header-image"><h1 class="slide-title"><i class="fas fa-file-contract"></i> Tipología de Contratos Laborales</h1><p class="slide-subtitle">Modalidades según el Código Sustantivo del Trabajo</p></div><div class="tabs"><button class="tab active" onclick="showTab(event, 'indefinido')">Término Indefinido</button><button class="tab" onclick="showTab(event, 'fijo')">Término Fijo</button><button class="tab" onclick="showTab(event, 'obra')">Obra o Labor</button><button class="tab" onclick="showTab(event, 'ocasional')">Ocasional</button></div><div id="indefinido" class="tab-content active"><h3><i class="fas fa-infinity"></i> Contrato a Término Indefinido</h3><div class="info-box"><div class="info-box-title"><i class="fas fa-clock"></i> Características Principales</div><ul><li>No establece fecha de finalización</li><li>Es la regla general en contratación laboral</li><li>Puede ser verbal o escrito</li><li>Promueve la estabilidad del trabajador</li></ul></div><div class="cards-grid"><div class="card" style="background: var(--gradient-4);"><i class="fas fa-check-circle card-icon"></i><h4 class="card-title">Ventajas</h4><p class="card-content">Fomenta lealtad, retención de talento y estabilidad productiva</p></div><div class="card" style="background: linear-gradient(135deg, #f44336, #e91e63);"><i class="fas fa-exclamation-circle card-icon"></i><h4 class="card-title">Consideraciones</h4><p class="card-content">Costo de indemnización por despido sin justa causa</p></div></div></div><div id="fijo" class="tab-content"><h3><i class="fas fa-calendar-alt"></i> Contrato a Término Fijo</h3><div class="info-box"><div class="info-box-title"><i class="fas fa-calendar-check"></i> Características Principales</div><ul><li>Duración máxima inicial: 3 años</li><li>SIEMPRE debe constar por escrito</li><li>Renovación automática sin preaviso de 30 días</li><li>Contratos &lt; 1 año: máximo 3 prórrogas iguales</li></ul></div></div><div id="obra" class="tab-content"><h3><i class="fas fa-hard-hat"></i> Contrato por Obra o Labor</h3><div class="info-box"><div class="info-box-title"><i class="fas fa-tasks"></i> Puntos Clave</div><ul style="padding-left: 20px; list-style-type: disc;"><li>Duración según proyecto específico</li><li>Debe definirse claramente la obra</li><li>No admite renovaciones</li><li>Termina al finalizar la obra</li></ul></div><div class="info-box" style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); border-left-color: #ff9800;"><div class="info-box-title" style="color: #ff9800;"><i class="fas fa-exclamation-triangle"></i> Atención Especial</div><p>La obra o labor debe estar <strong>perfectamente definida</strong> para evitar que sea declarado como contrato indefinido.</p></div></div><div id="ocasional" class="tab-content"><h3><i class="fas fa-user-clock"></i> Contrato Ocasional o Transitorio</h3><div class="info-box"><div class="info-box-title"><i class="fas fa-stopwatch-20"></i> Puntos Clave</div><ul style="padding-left: 20px; list-style-type: disc;"><li>Máximo 1 mes de duración</li><li>Para labores NO misionales</li><li>Todas las prestaciones proporcionales</li><li>Afiliación completa a seguridad social</li></ul></div><div class="chart-container"><canvas id="contractTypesChart"></canvas></div></div></div>
            <!-- Slide 4: Análisis Comparativo -->
            <div class="slide"><div class="slide-header"><img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=200&fit=crop" alt="Análisis Comparativo" class="slide-header-image"><h1 class="slide-title"><i class="fas fa-chart-bar"></i> Análisis Comparativo para el Empleador</h1><p class="slide-subtitle">Estrategia y Gestión del Riesgo</p></div><table class="comparison-table"><thead><tr><th>Característica</th><th>T. Indefinido</th><th>T. Fijo</th><th>Obra/Labor</th><th>Ocasional</th></tr></thead><tbody><tr><td><strong>Duración</strong></td><td>Indefinida</td><td>Máx. 3 años</td><td>Según obra</td><td>Máx. 1 mes</td></tr><tr><td><strong>Formalidad</strong></td><td>Verbal o escrito</td><td style="background: #ffebee;">Siempre escrito</td><td>Recomendado escrito</td><td>Verbal o escrito</td></tr><tr><td><strong>Renovación</strong></td><td>No aplica</td><td style="background: #e3f2fd;">Automática sin preaviso</td><td>No aplica</td><td>No aplica</td></tr><tr><td><strong>Prestaciones</strong></td><td>Todas</td><td>Todas</td><td>Todas</td><td>Todas (prop.)</td></tr><tr><td><strong>Ventaja Clave</strong></td><td style="background: #e8f5e9;">Retención talento</td><td style="background: #e8f5e9;">Flexibilidad</td><td style="background: #e8f5e9;">Fin natural</td><td style="background: #e8f5e9;">Agilidad</td></tr><tr><td><strong>Riesgo Principal</strong></td><td style="background: #ffebee;">Indemnización</td><td style="background: #ffebee;">Carga administrativa</td><td style="background: #ffebee;">Definición vaga</td><td style="background: #ffebee;">Uso limitado</td></tr></tbody></table><div class="chart-container"><canvas id="riskAnalysisChart"></canvas></div></div>
            <!-- Slide 5: Sistema de Seguridad Social -->
            <div class="slide"><div class="slide-header"><img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=800&h=200&fit=crop" alt="Seguridad Social" class="slide-header-image"><h1 class="slide-title"><i class="fas fa-shield-alt"></i> Sistema de Seguridad Social Integral</h1><p class="slide-subtitle">Estructura según la Ley 100 de 1993</p></div><div class="cards-grid"><div class="card" style="background: linear-gradient(135deg, #2196F3, #03A9F4);"><i class="fas fa-hospital card-icon"></i><h3 class="card-title">Salud (EPS)</h3><p class="card-content"><strong>Aporte Total: 12.5%</strong><br>Empleador: 8.5%<br>Trabajador: 4%</p></div><div class="card" style="background: linear-gradient(135deg, #4CAF50, #8BC34A);"><i class="fas fa-piggy-bank card-icon"></i><h3 class="card-title">Pensión</h3><p class="card-content"><strong>Aporte Total: 16%</strong><br>Empleador: 12%<br>Trabajador: 4%</p></div><div class="card" style="background: linear-gradient(135deg, #FF9800, #FF5722);"><i class="fas fa-hard-hat card-icon"></i><h3 class="card-title">ARL</h3><p class="card-content"><strong>Aporte: 0.522% - 6.960%</strong><br>100% a cargo del empleador<br>Según nivel de riesgo</p></div><div class="card" style="background: linear-gradient(135deg, #9C27B0, #E91E63);"><i class="fas fa-users card-icon"></i><h3 class="card-title">Caja Compensación</h3><p class="card-content"><strong>Aporte: 4%</strong><br>100% a cargo del empleador<br>Sobre valor de nómina</p></div></div><div class="chart-container"><canvas id="socialSecurityChart"></canvas></div></div>
            <!-- Slide 6: Proceso de Afiliación -->
            <div class="slide"><div class="slide-header"><img src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=800&h=200&fit=crop" alt="Proceso de Afiliación" class="slide-header-image"><h1 class="slide-title"><i class="fas fa-clipboard-list"></i> Proceso de Afiliación - Guía Práctica</h1><p class="slide-subtitle">Paso a Paso para Empleadores</p></div><div class="accordion"><div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)"><span><i class="fas fa-shield-alt"></i> Paso 1: Afiliación a ARL</span><i class="fas fa-chevron-down"></i></div><div class="accordion-content"><ol style="padding-left: 20px;"><li>Ingrese al portal de la ARL elegida</li><li>Seleccione "Afiliación de empresas"</li><li>Complete el formulario con datos de la empresa</li><li>Cargue documentos: RUT, Cámara de Comercio, Cédula RL</li><li>Registre trabajadores iniciales</li><li>Envíe solicitud y espere confirmación (máx. 3 días)</li></ol></div></div><div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)"><span><i class="fas fa-users"></i> Paso 2: Afiliación a Caja de Compensación</span><i class="fas fa-chevron-down"></i></div><div class="accordion-content"><ol style="padding-left: 20px;"><li>Prepare documentos digitalizados (PDF, máx 2MB)</li><li>Ingrese al portal de la Caja</li><li>Complete formulario de afiliación persona jurídica</li><li>Adjunte documentos requeridos</li><li>Espere carta de aceptación (5 días hábiles)</li><li>Ingrese a zona transaccional para afiliar trabajadores</li></ol></div></div><div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)"><span><i class="fas fa-laptop"></i> Paso 3: Registro en Operador PILA</span><i class="fas fa-chevron-down"></i></div><div class="accordion-content"><h4>Registro en plataforma PILA:</h4><ol style="padding-left: 20px;"><li>Acceda al operador PILA de su preferencia</li><li>Seleccione "Registro" → "Empresa"</li><li>Complete información de la empresa</li><li>Indique administradoras (ARL y CCF)</li><li>Cree usuario y contraseña</li></ol></div></div></div></div>
            <!-- Slide 7: PILA -->
            <div class="slide"><div class="slide-header"><img src="https://images.unsplash.com/photo-1554224154-26032ffc0d07?w=800&h=200&fit=crop" alt="PILA" class="slide-header-image"><h1 class="slide-title"><i class="fas fa-file-invoice-dollar"></i> Planilla Integrada de Liquidación de Aportes</h1><p class="slide-subtitle">Sistema Unificado de Pago</p></div><div class="timeline"><div class="timeline-item"><h3>1. Ingreso al Sistema</h3><p>Acceda con usuario y contraseña al operador PILA</p></div><div class="timeline-item"><h3>2. Generar Planilla</h3><p>Seleccione "Planilla Tipo E - Empleados" y período</p></div><div class="timeline-item"><h3>3. Cargar Nómina</h3><p>Ingrese datos manualmente o cargue archivo plano</p></div><div class="timeline-item"><h3>4. Liquidación</h3><p>Sistema calcula automáticamente aportes</p></div><div class="timeline-item"><h3>5. Validación</h3><p>Revise y corrija posibles inconsistencias</p></div><div class="timeline-item"><h3>6. Pago</h3><p>PSE o genere PIN para pago en banco</p></div></div></div>
            <!-- Slide 8: Casos Especiales -->
            <div class="slide"><div class="slide-header"><img src="https://images.unsplash.com/photo-1589829545856-d10d557cf95f?w=800&h=200&fit=crop" alt="Casos Especiales" class="slide-header-image"><h1 class="slide-title"><i class="fas fa-exclamation-circle"></i> Casos Especiales y Alertas</h1><p class="slide-subtitle">Situaciones Críticas para el Empleador</p></div><div class="accordion"><div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)" style="background: linear-gradient(135deg, #f44336, #e91e63);"><span><i class="fas fa-ban"></i> Contrato Realidad</span><i class="fas fa-chevron-down"></i></div><div class="accordion-content"><h4>¿Cuándo ocurre?</h4><p>Cuando se usa un contrato de prestación de servicios pero existe:</p><ul style="margin: 15px 0; padding-left: 20px;"><li>Cumplimiento de horario</li><li>Recepción de órdenes directas</li><li>Uso de herramientas de la empresa</li><li>Integración en la estructura jerárquica</li></ul></div></div><div class="accordion-item"><div class="accordion-header" onclick="toggleAccordion(this)"><span><i class="fas fa-user-graduate"></i> Contrato de Aprendizaje</span><i class="fas fa-chevron-down"></i></div><div class="accordion-content"><h4>Características Especiales:</h4><ul style="padding-left: 20px;"><li>NO es contrato laboral</li><li>Apoyo de sostenimiento (no salario)</li><li>Afiliación a EPS y ARL (no pensión)</li><li>Duración máxima: 2 años</li></ul></div></div></div><div class="chart-container"><canvas id="risksChart"></canvas></div></div>
            
            <!-- Slide 9: Recursos y Enlaces (CONTENIDO MODIFICADO SEGÚN PDF) -->
            <div class="slide">
                <div class="slide-header">
                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&h=200&fit=crop" alt="Recursos" class="slide-header-image">
                    <h1 class="slide-title"><i class="fas fa-link"></i> Directorio Completo de Entidades</h1>
                    <p class="slide-subtitle">Enlaces a todas las plataformas del Sistema</p>
                </div>

                <div class="links-section">
                    <!-- EPS -->
                    <div class="links-category">
                        <h3 class="links-category-title"><i class="fas fa-hospital"></i> Entidades Promotoras de Salud (EPS)</h3>
                        <div class="links-grid">
                            <a href="https://www.epssura.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #00BCD4; color: white;"><i class="fas fa-hospital-alt"></i></div>
                                <div class="link-info"><div class="link-name">SURA EPS</div><div class="link-description">Portal empresas y afiliados</div></div>
                            </a>
                            <a href="https://www.compensar.com/salud" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #4CAF50; color: white;"><i class="fas fa-heart"></i></div>
                                <div class="link-info"><div class="link-name">Compensar EPS</div><div class="link-description">Servicios de salud</div></div>
                            </a>
                            <a href="https://www.saludtotal.com.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #FF5722; color: white;"><i class="fas fa-stethoscope"></i></div>
                                <div class="link-info"><div class="link-name">Salud Total</div><div class="link-description">Portal de servicios</div></div>
                            </a>
                            <a href="https://www.nuevaeps.com.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #9C27B0; color: white;"><i class="fas fa-user-md"></i></div>
                                <div class="link-info"><div class="link-name">Nueva EPS</div><div class="link-description">Afiliaciones y servicios</div></div>
                            </a>
                            <a href="https://www.epssanitas.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #3F51B5; color: white;"><i class="fas fa-clinic-medical"></i></div>
                                <div class="link-info"><div class="link-name">Sanitas EPS</div><div class="link-description">Portal corporativo</div></div>
                            </a>
                            <a href="https://www.colsanitas.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #009688; color: white;"><i class="fas fa-hospital-symbol"></i></div>
                                <div class="link-info"><div class="link-name">Colsanitas</div><div class="link-description">Medicina prepagada y EPS</div></div>
                            </a>
                        </div>
                    </div>
                    <!-- ARL -->
                    <div class="links-category">
                        <h3 class="links-category-title"><i class="fas fa-hard-hat"></i> Administradoras de Riesgos Laborales (ARL)</h3>
                        <div class="links-grid">
                            <a href="https://www.arlsura.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #FFC107; color: #333;"><i class="fas fa-shield-alt"></i></div>
                                <div class="link-info"><div class="link-name">ARL SURA</div><div class="link-description">Afiliación empresas</div></div>
                            </a>
                            <a href="https://www.positiva.gov.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #8BC34A; color: white;"><i class="fas fa-user-shield"></i></div>
                                <div class="link-info"><div class="link-name">Positiva ARL</div><div class="link-description">ARL del Estado</div></div>
                            </a>
                            <a href="https://www.colmenaseguros.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #FF9800; color: white;"><i class="fas fa-hard-hat"></i></div>
                                <div class="link-info"><div class="link-name">Colmena Seguros</div><div class="link-description">Riesgos laborales</div></div>
                            </a>
                            <a href="https://www.axacolpatria.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #E91E63; color: white;"><i class="fas fa-umbrella"></i></div>
                                <div class="link-info"><div class="link-name">AXA Colpatria</div><div class="link-description">ARL y seguros</div></div>
                            </a>
                            <a href="https://www.segurosbolivar.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #00BCD4; color: white;"><i class="fas fa-helmet-safety"></i></div>
                                <div class="link-info"><div class="link-name">Seguros Bolívar</div><div class="link-description">ARL y prevención</div></div>
                            </a>
                        </div>
                    </div>
                    <!-- Fondos de Pensiones -->
                    <div class="links-category">
                        <h3 class="links-category-title"><i class="fas fa-piggy-bank"></i> Fondos de Pensiones</h3>
                        <div class="links-grid">
                            <a href="https://www.colpensiones.gov.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #2196F3; color: white;"><i class="fas fa-landmark"></i></div>
                                <div class="link-info"><div class="link-name">Colpensiones</div><div class="link-description">Régimen público</div></div>
                            </a>
                            <a href="https://www.proteccion.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #4CAF50; color: white;"><i class="fas fa-coins"></i></div>
                                <div class="link-info"><div class="link-name">Protección</div><div class="link-description">AFP privada</div></div>
                            </a>
                            <a href="https://www.porvenir.com.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #FF5722; color: white;"><i class="fas fa-chart-line"></i></div>
                                <div class="link-info"><div class="link-name">Porvenir</div><div class="link-description">Fondo de pensiones</div></div>
                            </a>
                            <a href="https://www.colfondos.com.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #9C27B0; color: white;"><i class="fas fa-wallet"></i></div>
                                <div class="link-info"><div class="link-name">Colfondos</div><div class="link-description">Pensiones y cesantías</div></div>
                            </a>
                        </div>
                    </div>
                    <!-- Cajas de Compensación -->
                    <div class="links-category">
                        <h3 class="links-category-title"><i class="fas fa-users"></i> Cajas de Compensación Familiar</h3>
                        <div class="links-grid">
                            <a href="https://www.compensar.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #3F51B5; color: white;"><i class="fas fa-home"></i></div>
                                <div class="link-info"><div class="link-name">Compensar</div><div class="link-description">CCF Bogotá</div></div>
                            </a>
                            <a href="https://www.cafam.com.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #009688; color: white;"><i class="fas fa-child"></i></div>
                                <div class="link-info"><div class="link-name">Cafam</div><div class="link-description">Caja Familiar</div></div>
                            </a>
                            <a href="https://www.colsubsidio.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #FF9800; color: white;"><i class="fas fa-graduation-cap"></i></div>
                                <div class="link-info"><div class="link-name">Colsubsidio</div><div class="link-description">Subsidio familiar</div></div>
                            </a>
                            <a href="https://www.comfandi.com.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #8BC34A; color: white;"><i class="fas fa-users-cog"></i></div>
                                <div class="link-info"><div class="link-name">Comfandi</div><div class="link-description">Valle del Cauca</div></div>
                            </a>
                            <a href="https://www.comfama.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #E91E63; color: white;"><i class="fas fa-building"></i></div>
                                <div class="link-info"><div class="link-name">Comfama</div><div class="link-description">Antioquia</div></div>
                            </a>
                            <a href="https://www.comfenalcoantioquia.com.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #673AB7; color: white;"><i class="fas fa-university"></i></div>
                                <div class="link-info"><div class="link-name">Comfenalco</div><div class="link-description">Nacional</div></div>
                            </a>
                        </div>
                    </div>
                    <!-- Operadores PILA -->
                    <div class="links-category">
                        <h3 class="links-category-title"><i class="fas fa-file-invoice"></i> Operadores PILA</h3>
                        <div class="links-grid">
                            <a href="https://www.miplanilla.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #FFC107; color: #333;"><i class="fas fa-file-alt"></i></div>
                                <div class="link-info"><div class="link-name">Mi Planilla</div><div class="link-description">Operador PILA</div></div>
                            </a>
                            <a href="https://www.aportesenlinea.com/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #00BCD4; color: white;"><i class="fas fa-laptop"></i></div>
                                <div class="link-info"><div class="link-name">Aportes en Línea</div><div class="link-description">SOI Operador</div></div>
                            </a>
                        </div>
                    </div>
                     <!-- Otros -->
                    <div class="links-category">
                        <h3 class="links-category-title"><i class="fas fa-info-circle"></i> Otros</h3>
                        <div class="links-grid">
                            <a href="https://www.miseguridadsocial.gov.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #2196F3; color: white;"><i class="fas fa-shield-alt"></i></div>
                                <div class="link-info"><div class="link-name">Mi Seguridad Social</div><div class="link-description">Portal del Estado</div></div>
                            </a>
                            <a href="https://www.adres.gov.co/" target="_blank" class="link-card">
                                <div class="link-logo" style="background: #9C27B0; color: white;"><i class="fas fa-university"></i></div>
                                <div class="link-info"><div class="link-name">ADRES</div><div class="link-description">Admin. recursos salud</div></div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 10: Herramientas Prácticas (CORREGIDO)-->
            <div class="slide">
                <div class="slide-header">
                    <img src="https://images.unsplash.com/photo-1434626881859-194d67b2b86f?w=800&h=200&fit=crop" alt="Herramientas" class="slide-header-image">
                    <h1 class="slide-title">
                        <i class="fas fa-tools"></i> Herramientas y Calculadoras
                    </h1>
                    <p class="slide-subtitle">Recursos Prácticos para el Empleador</p>
                </div>

                <div class="tabs">
                    <button class="tab active" onclick="showTab(event, 'calculadora')">Calculadora</button>
                    <button class="tab" onclick="showTab(event, 'documentos')">Documentos</button>
                    <button class="tab" onclick="showTab(event, 'tips')">Tips</button>
                </div>

                <div id="calculadora" class="tab-content active">
                    <div class="info-box">
                        <div class="info-box-title">
                            <i class="fas fa-calculator"></i> Calculadora de Aportes a Seguridad Social
                        </div>
                        <div style="margin-top: 20px;">
                            <label>Salario Base del Trabajador:</label>
                            <input type="number" id="salaryInput" placeholder="Ej: 1300000" style="padding: 10px; margin: 10px; border-radius: 5px; border: 1px solid #ddd; width: 200px;">
                            <button class="btn btn-primary" onclick="calculateContributions()">
                                <i class="fas fa-calculator"></i> Calcular Aportes
                            </button>
                        </div>
                        <div id="calculationResults" style="margin-top: 20px; overflow-x: auto;"></div>
                    </div>
                </div>
                
                <div id="documentos" class="tab-content">
                    <div class="cards-grid">
                        <div class="card" onclick="downloadIndefiniteContract()" style="background: linear-gradient(135deg, #2196F3, #64B5F6);">
                            <i class="fas fa-file-word card-icon"></i>
                            <h3 class="card-title">Modelo Contrato Indefinido</h3>
                            <p class="card-content">Descargue una plantilla de contrato a término indefinido.</p>
                        </div>
                        <div class="card" onclick="downloadFixedContract()" style="background: linear-gradient(135deg, #607D8B, #90A4AE);">
                            <i class="fas fa-file-word card-icon"></i>
                            <h3 class="card-title">Modelo Contrato Fijo</h3>
                            <p class="card-content">Descargue una plantilla de contrato a término fijo.</p>
                        </div>
                        <div class="card" onclick="downloadPayrollTemplate()" style="background: linear-gradient(135deg, #4CAF50, #81C784);">
                            <i class="fas fa-file-excel card-icon"></i>
                            <h3 class="card-title">Plantilla Aportes</h3>
                            <p class="card-content">Descargue una plantilla en excel para el calculo de aportes</p>
                        </div>
                    </div>
                </div>

                <div id="tips" class="tab-content">
                    <div class="timeline">
                        <div class="timeline-item">
                            <h3>Tip 1: Preaviso</h3>
                            <p>Siempre notifique con 30 días de anticipación la no renovación de contratos a término fijo</p>
                        </div>
                        <div class="timeline-item">
                            <h3>Tip 2: Documentación</h3>
                            <p>Mantenga todos los contratos por escrito, incluso los indefinidos</p>
                        </div>
                        <div class="timeline-item">
                            <h3>Tip 3: PILA</h3>
                            <p>Pague siempre antes del vencimiento para evitar intereses de mora</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 11: Quiz Interactivo -->
            <div class="slide"><div class="slide-header"><img src="https://images.unsplash.com/photo-1606326608606-aa0b62935f2b?w=800&h=200&fit=crop" alt="Evaluación" class="slide-header-image"><h1 class="slide-title"><i class="fas fa-question-circle"></i> Evaluación de Conocimientos</h1><p class="slide-subtitle">Pon a prueba lo aprendido</p></div><div class="quiz-container"><div id="quiz-content"><h3 class="quiz-question"><span id="questionNumber">Pregunta 1 de 5:</span><span id="questionText">¿Cuál es el elemento más importante para determinar la existencia de un contrato laboral?</span></h3><div class="quiz-options" id="quizOptions"></div><div style="margin-top: 20px; text-align: center;"><button class="btn btn-primary" onclick="nextQuestion()">Siguiente <i class="fas fa-arrow-right"></i></button></div></div><div id="quiz-results" style="display: none; text-align: center;"><h2>¡Evaluación Completada!</h2><div style="font-size: 3rem; margin: 20px 0;"><span id="scoreDisplay">0/5</span></div><button class="btn btn-primary" onclick="resetQuiz()"><i class="fas fa-redo"></i> Reintentar</button></div></div></div>
            <!-- Slide 12: Certificación -->
            <div class="slide"><div class="slide-header"><div class="video-header-container"><video src="https://video-previews.elements.envatousercontent.com/c9c7555d-a75b-492e-9f2e-df608fa80a44/watermarked_preview/watermarked_preview.mp4" autoplay loop muted playsinline class="slide-header-video"></video></div><h1 class="slide-title"><i class="fas fa-award"></i> Certificación del Curso</h1><p class="slide-subtitle">¡Felicitaciones por completar el curso!</p></div><div id="certificatePrompt" style="text-align: center; margin-top: 50px;"><p style="margin-bottom: 20px; font-size: 1.1rem;">Has llegado al final del curso. ¿Deseas generar tu certificado de finalización?</p><button class="btn btn-primary btn-lg" onclick="showCertificateGenerator()"><i class="fas fa-award"></i> Sí, generar mi certificado</button></div><div id="certificateWorkspace" style="display: none; animation: fadeIn 0.5s;"><div id="newCertificateContainer" class="new-certificate"><div class="cert-bg-swirl top-right"></div><div class="cert-bg-swirl bottom-left"></div><div class="cert-content"><div class="cert-seal"><i class="fas fa-medal"></i></div><div class="cert-title-section"><h2 class="cert-title">Certificado de Finalización</h2><p class="cert-subtitle">Se certifica que:</p></div><div class="cert-recipient-name" id="certRecipientName"></div><p class="cert-course-text">Ha completado satisfactoriamente el curso de:</p><p class="cert-course-name">contratación y afiliación al Sistema de Seguridad Social.</p><div class="cert-signatures"><div class="cert-signature-block"><div class="cert-signature-line"></div><p>Director del Curso</p></div><div class="cert-signature-block"><div class="cert-signature-line"></div><p>Coordinador Académico</p></div></div></div></div><div style="text-align: center; margin-top: 30px;"><input type="text" id="studentNameInput" placeholder="Escribe tu nombre completo aquí" style="padding: 12px; font-size: 1rem; border-radius: 25px; border: 2px solid #ddd; width: 100%; max-width: 400px; margin-bottom: 20px; text-align:center;" onkeyup="updateCertName(this.value)"><button class="btn btn-success" onclick="generateNewCertificate()"><i class="fas fa-download"></i> Descargar Certificado PDF</button></div></div></div>
            
             <!-- ====== DIAPOSITIVA FINAL AGREGADA ====== -->
            <div class="slide cover-slide final-slide">
                 <div class="cover-content">
                    <h1>Gracias</h1>
                    <p>¿Tienen alguna pregunta o inquietud?</p>
                    <div class="contact-info">
                        <div><i class="fas fa-user"></i> Arnold López Ayala</div>
                        <div><i class="fas fa-envelope"></i> arnold.lopez.a@example.com</div>
                    </div>
                </div>
            </div>

            <!-- Slide Controls -->
            <div class="slide-controls no-print">
                <button id="prevBtn" class="btn btn-secondary" onclick="previousSlide()">
                    <i class="fas fa-chevron-left"></i> Anterior
                </button>
                <div>
                    <span id="slideIndicator">1 / 14</span>
                </div>
                <button id="nextBtn" class="btn btn-primary" onclick="nextSlide()">
                    Siguiente <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Action Buttons -->
    <div class="fab-container no-print">
        <div class="fab" onclick="openModal()">
            <span class="fab-label">Ayuda</span>
            <i class="fas fa-question"></i>
        </div>
        <div class="fab" onclick="downloadCourseAsPdf()" style="background: linear-gradient(135deg, #4CAF50, #8BC34A);">
            <span class="fab-label">Descargar Material en PDF</span>
            <i class="fas fa-file-pdf"></i>
        </div>
        <div class="fab" onclick="scrollToTop()" style="background: linear-gradient(135deg, #2196F3, #03A9F4);">
            <span class="fab-label">Ir arriba</span>
            <i class="fas fa-arrow-up"></i>
        </div>
    </div>

    <!-- Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2><i class="fas fa-life-ring"></i> Centro de Ayuda</h2>
            <div style="margin-top: 20px;">
                <h3>Navegación del Curso</h3>
                <ul style="padding-left: 20px; line-height: 2;">
                    <li>Use los botones "Anterior" y "Siguiente" para navegar</li>
                    <li>Haga clic en el menú superior para saltar a secciones</li>
                    <li>Los acordeones se expanden al hacer clic</li>
                    <li>Complete el quiz para evaluar sus conocimientos</li>
                    <li>Use el botón de pantalla completa para presentaciones</li>
                </ul>
                <h3 style="margin-top: 20px;">Atajos de Teclado</h3>
                <ul style="padding-left: 20px; line-height: 2;">
                    <li><kbd>←</kbd> Diapositiva anterior</li>
                    <li><kbd>→</kbd> Diapositiva siguiente</li>
                    <li><kbd>F</kbd> Pantalla completa</li>
                    <li><kbd>ESC</kbd> Salir de pantalla completa / Cerrar modal</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        let quizQuestions = [
            { question: "¿Cuál es el elemento más importante para determinar la existencia de un contrato laboral?", options: ["El salario", "La subordinación", "El horario de trabajo", "El contrato escrito"], correct: 1 },
            { question: "¿Cuál contrato SIEMPRE debe constar por escrito?", options: ["Término indefinido", "Término fijo", "Ocasional", "Todos los anteriores"], correct: 1 },
            { question: "¿Qué porcentaje del aporte a salud paga el empleador?", options: ["4%", "8.5%", "12%", "12.5%"], correct: 1 },
            { question: "¿Quién paga el 100% de la ARL?", options: ["El trabajador", "El empleador", "Se divide 50/50", "El Estado"], correct: 1 },
            { question: "¿Cuántos días de preaviso se requieren para no renovar un contrato a término fijo?", options: ["15 días", "20 días", "30 días", "45 días"], correct: 2 }
        ];
        let currentQuestion = 0;
        let score = 0;

        // Inicialización
        window.addEventListener('load', function() {
            initCharts();
            updateSlideUI();
            loadQuestion();
        });

        // Navegación de diapositivas
        function goToSlide(slideIndex) {
            if(slideIndex < 0 || slideIndex >= totalSlides) return;
            slides[currentSlide].classList.remove('active');
            currentSlide = slideIndex;
            slides[currentSlide].classList.add('active');
            updateSlideUI();
            slides[currentSlide].scrollTop = 0;
        }

        function nextSlide() { if (currentSlide < totalSlides - 1) goToSlide(currentSlide + 1); }
        function previousSlide() { if (currentSlide > 0) goToSlide(currentSlide - 1); }

        function updateSlideUI() {
            document.getElementById('slideIndicator').textContent = `${currentSlide + 1} / ${totalSlides}`;
            document.getElementById('progressBar').style.width = `${((currentSlide) / (totalSlides-1)) * 100}%`;
            
            const prevButton = document.getElementById('prevBtn');
            const nextButton = document.getElementById('nextBtn');
            
            prevButton.style.visibility = currentSlide === 0 ? 'hidden' : 'visible';

            if (currentSlide === totalSlides - 1) {
                nextButton.innerHTML = 'Finalizar <i class="fas fa-times-circle"></i>';
                nextButton.onclick = () => { if (document.fullscreenElement) { document.exitFullscreen(); } };
            } else {
                nextButton.innerHTML = 'Siguiente <i class="fas fa-arrow-right"></i>';
                nextButton.onclick = nextSlide;
            }

            updateNavigation();
        }


        function updateNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            let activeIndex = -1;
            
            // Ajustar los rangos de las diapositivas para la navegación
            if (currentSlide === 0) activeIndex = 0; // Inicio
            else if (currentSlide === 1) activeIndex = 1; // Bienvenida
            else if (currentSlide >= 2 && currentSlide <= 4) activeIndex = 2; // Contratos
            else if (currentSlide >= 5 && currentSlide <= 8) activeIndex = 3; // Seguridad
            else if (currentSlide === 9) activeIndex = 4; // Recursos
            else if (currentSlide === 10) activeIndex = 5; // Herramientas
            else if (currentSlide === 11) activeIndex = 6; // Quiz
            else if (currentSlide === 12) activeIndex = 7; // Certificado
            else if (currentSlide === 13) activeIndex = 8; // Contacto
            
            if(activeIndex !== -1) navItems[activeIndex].classList.add('active');
        }

        // Pantalla completa
        function toggleFullscreen() {
            const container = document.getElementById('mainContainer');
            if (!document.fullscreenElement) {
                container.requestFullscreen().catch(err => alert(`Error: ${err.message}`));
            } else {
                document.exitFullscreen();
            }
        }
        
        document.addEventListener('fullscreenchange', () => {
            const isFs = !!document.fullscreenElement;
            document.body.classList.toggle('fullscreen-active', isFs);
            document.getElementById('mainContainer').classList.toggle('fullscreen-mode', isFs);
            document.querySelector('.fullscreen-btn').innerHTML = isFs ? '<i class="fas fa-compress"></i> Salir' : '<i class="fas fa-expand"></i> Pantalla Completa';
        });

        // Acordeones y Tabs
        function toggleAccordion(header) { header.parentElement.classList.toggle('active'); }
        function showTab(evt, tabName) {
            const slide = evt.target.closest('.slide');
            slide.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            slide.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            slide.querySelector(`#${tabName}`).classList.add('active');
            evt.currentTarget.classList.add('active');
        }

        // Quiz
        function selectOption(element, optionIndex) {
            const optionsContainer = element.parentElement;
            if (optionsContainer.dataset.answered) return;
            optionsContainer.dataset.answered = "true";
            
            if (optionIndex === quizQuestions[currentQuestion].correct) {
                element.classList.add('correct');
                score++;
            } else {
                element.classList.add('incorrect');
                optionsContainer.children[quizQuestions[currentQuestion].correct].classList.add('correct');
            }
        }
        
        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < quizQuestions.length) loadQuestion();
            else showQuizResults();
        }

        function loadQuestion() {
            const q = quizQuestions[currentQuestion];
            document.getElementById('questionNumber').textContent = `Pregunta ${currentQuestion + 1} de ${quizQuestions.length}:`;
            document.getElementById('questionText').textContent = q.question;
            const optsContainer = document.getElementById('quizOptions');
            optsContainer.innerHTML = '';
            delete optsContainer.dataset.answered;
            q.options.forEach((opt, i) => {
                const optEl = document.createElement('div');
                optEl.className = 'quiz-option';
                optEl.innerHTML = `<strong>${String.fromCharCode(65 + i)}:</strong> ${opt}`;
                optEl.onclick = () => selectOption(optEl, i);
                optsContainer.appendChild(optEl);
            });
        }

        function showQuizResults() {
            document.getElementById('quiz-content').style.display = 'none';
            document.getElementById('quiz-results').style.display = 'block';
            document.getElementById('scoreDisplay').textContent = `${score}/${quizQuestions.length}`;
        }

        function resetQuiz() {
            currentQuestion = 0; score = 0;
            document.getElementById('quiz-content').style.display = 'block';
            document.getElementById('quiz-results').style.display = 'none';
            loadQuestion();
        }

        // Modal
        function openModal() { document.getElementById('helpModal').style.display = 'block'; }
        function closeModal() { document.getElementById('helpModal').style.display = 'none'; }
        window.onclick = (event) => { if (event.target == document.getElementById('helpModal')) closeModal(); }

        // Calculadora
        function calculateContributions() {
            const salary = parseFloat(document.getElementById('salaryInput').value);
            if (isNaN(salary) || salary <= 0) { alert('Por favor ingrese un salario válido'); return; }
            const f = (v) => new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP', minimumFractionDigits: 0 }).format(v);
            const hE = salary * 0.085, hT = salary * 0.04;
            const pE = salary * 0.12, pT = salary * 0.04;
            const arl = salary * 0.00522, ccf = salary * 0.04;
            document.getElementById('calculationResults').innerHTML = `<h4>Resultados del Cálculo para un salario de ${f(salary)}:</h4><table class="comparison-table"><thead><tr><th>Concepto</th><th>Aporte Empleador</th><th>Aporte Trabajador</th></tr></thead><tbody><tr><td>Salud (8.5% / 4%)</td><td>${f(hE)}</td><td>${f(hT)}</td></tr><tr><td>Pensión (12% / 4%)</td><td>${f(pE)}</td><td>${f(pT)}</td></tr><tr><td>ARL (Riesgo I - 0.522%)</td><td>${f(arl)}</td><td>${f(0)}</td></tr><tr><td>Caja de Compensación (4%)</td><td>${f(ccf)}</td><td>${f(0)}</td></tr><tr style="background:#e3f2fd;font-weight:bold;"><td>TOTAL</td><td>${f(hE+pE+arl+ccf)}</td><td>${f(hT+pT)}</td></tr></tbody></table>`;
        }
        
        // Loader
        function showLoader(text) {
            const loader = document.getElementById('loader');
            loader.querySelector('#loader-text').textContent = text;
            loader.style.display = 'flex';
            setTimeout(() => loader.style.opacity = '1', 10);
        }

        function hideLoader() {
            const loader = document.getElementById('loader');
            loader.style.opacity = '0';
            setTimeout(() => loader.style.display = 'none', 500);
        }

        // Certificado
        function showCertificateGenerator() { document.getElementById('certificatePrompt').style.display = 'none'; document.getElementById('certificateWorkspace').style.display = 'block';}
        function updateCertName(name) { const certNameElement = document.getElementById('certRecipientName'); certNameElement.textContent = name || ' '; }
        function generateNewCertificate() { const name = document.getElementById('studentNameInput').value; if (!name.trim()) { alert('Por favor, escribe tu nombre completo para generar el certificado.'); return; } updateCertName(name); showLoader('Generando Certificado...'); setTimeout(() => { html2canvas(document.getElementById('newCertificateContainer'), { scale: 2, useCORS: true, backgroundColor: '#ffffff' }).then(canvas => { const { jsPDF } = window.jspdf; const pdf = new jsPDF({ orientation: 'landscape', unit: 'mm', format: [297, 210] }); pdf.addImage(canvas.toDataURL('image/png', 1.0), 'PNG', 0, 0, 297, 210); pdf.save(`Certificado_${name.replace(/\s+/g, '_')}.pdf`); hideLoader(); }).catch(err => { alert("Error al generar el PDF: " + err.message); hideLoader(); }); }, 200); }
        
        // PDF del curso
        function downloadCourseAsPdf() {
            // URL de descarga directa del archivo en Google Drive
            const fileUrl = 'https://drive.google.com/uc?export=download&id=10durJN-8pJ1dJiloRcZN-3Ep8lMrTUlX';
            
            // Abre la URL en una nueva pestaña, lo que iniciará la descarga.
            window.open(fileUrl, '_blank');
        }

        // Plantillas descargables (CORREGIDO)
        function downloadIndefiniteContract() {
            window.open('https://docs.google.com/document/d/1qQwUVKISeaGmghGjnr3oak04lsHMgdAp/export?format=doc', '_blank');
        }
        function downloadFixedContract() {
            window.open('https://docs.google.com/document/d/1AbyBDoazehT4ptPT1msBgPM9VA-KK78K/export?format=doc', '_blank');
        }
        function downloadPayrollTemplate() {
            window.open('https://docs.google.com/spreadsheets/d/1gw_Z5VGe-snjYdY8QhZy20hbdfPJTj5c/export?format=xlsx', '_blank');
        }

        // Scroll
        function scrollToTop() { const activeSlide = document.querySelector('.slide.active'); if (activeSlide) activeSlide.scrollTo({ top: 0, behavior: 'smooth' }); }

        // Gráficos
        function initCharts() { const configs = [{ id: 'subordinationChart', type: 'doughnut', data: { labels: ['Subordinación', 'Salario', 'Actividad Personal'], datasets: [{ data: [50, 25, 25], backgroundColor: ['#1a5490', '#2196F3', '#FFC107'] }] }, options: { plugins: { title: { display: true, text: 'Importancia de Elementos del Contrato' } } } }, { id: 'contractTypesChart', type: 'bar', data: { labels: ['Indefinido', 'Fijo', 'Obra/Labor', 'Ocasional'], datasets: [{ label: 'Uso en el mercado (%)', data: [45, 30, 20, 5], backgroundColor: ['#4CAF50', '#2196F3', '#FF9800', '#9C27B0'] }] }, options: { plugins: { title: { display: true, text: 'Distribución de Tipos de Contratos' } } } }, { id: 'riskAnalysisChart', type: 'radar', data: { labels: ['Flexibilidad', 'Costo', 'Riesgo Legal', 'Retención', 'Complejidad'], datasets: [{ label: 'T. Indefinido', data: [3, 7, 2, 9, 3], borderColor: '#4CAF50', backgroundColor: 'rgba(76,175,80,0.2)' }, { label: 'T. Fijo', data: [8, 5, 4, 5, 6], borderColor: '#2196F3', backgroundColor: 'rgba(33,150,243,0.2)' }] }, options: { plugins: { title: { display: true, text: 'Análisis Comparativo de Modalidades' } } } }, { id: 'socialSecurityChart', type: 'pie', data: { labels: ['Salud (12.5%)', 'Pensión (16%)', 'ARL (Promedio)', 'CCF (4%)'], datasets: [{ data: [12.5, 16, 2.43, 4], backgroundColor: ['#2196F3', '#4CAF50', '#FF9800', '#9C27B0'] }] }, options: { plugins: { legend: { position: 'right' }, title: { display: true, text: 'Distribución de Aportes (%)' } } } }, { id: 'risksChart', type: 'bar', data: { labels: ['Contrato Realidad', 'Mora PILA', 'Error Preaviso', 'Mal cálculo IBC', 'No afiliación'], datasets: [{ label: 'Impacto Económico (Nivel)', data: [10, 6, 4, 5, 8], backgroundColor: '#f44336' }] }, options: { indexAxis: 'y', plugins: { title: { display: true, text: 'Principales Riesgos Legales' } } } }]; configs.forEach(c => { const ctx = document.getElementById(c.id); if (ctx) new Chart(ctx, { type: c.type, data: c.data, options: { ...c.options, responsive: true, maintainAspectRatio: false } }); }); }

        // Atajos de teclado
        document.addEventListener('keydown', (e) => {
            if (e.target.tagName === 'INPUT') return;
            if (e.key === 'ArrowRight') nextSlide();
            else if (e.key === 'ArrowLeft') previousSlide();
            else if (e.key === 'Escape') closeModal();
        });
    </script>
</body>
</html>